<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <%- include("parts/head.ejs") %>
        <link href="/extra/style.css" rel="stylesheet" type="text/css">
        <link href="/images/icon.png" rel="icon" type="image/x-icon">
        <link href="https://fonts.googleapis.com/css?family=Bree+Serif" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
        <title>Dashboard â€“ TypicalBot</title>
    </head>
	<body>
        <%- include("parts/nav.ejs", { master, auth, user: auth ? user : null }) %>
        <div class="page-container container-fluid">
            <span class="section section-large"><p>TypicalBot Dashboard</p></span>
            <% if (auth) { %>
                <p class="text">Hello, <%= user.username %>. This dashboard is still in development.</p>
                <span class="section section-large"><p>Manage Servers</p></span>

                <ul class="guild-list">
                    <% if (!user.guilds || !user.guilds.length) { %>
                        <p class="text">No servers to display.</p>
                    <% } else {
                        if (!guilds.in.length) { %>
                                <p class="text">No servers to display.</p>
                        <% } else { guilds.in.sort((a,b) => { if (a.name.toLowerCase() < b.name.toLowerCase()) return -1; if (a.name.toLowerCase() > b.name.toLowerCase()) return 1; return 0}).forEach(g => { %>
                                <li><a href="/guild/<%= g.id %>"><img class="guild-icon" src="<%= g.icon ? `https://cdn.discordapp.com/icons/${g.id}/${g.icon}.jpg` : `/images/missing.png` %>" /><%= g.name %></a></li>
                            <% }) %>
                        <% } %>
                    <% } %>
                </ul>
                <span class="section section-large"><p>Invite to Servers</p></span>
                <ul class="guild-list">
                    <% if (!user.guilds || !user.guilds.length) { %>
						<p class="text">No servers to display.</p>
					<% } else {
						if (!guilds.not.length) { %>
								<p class="text">No servers to display.</p>
						<% } else { guilds.not.sort((a,b) => { if (a.name.toLowerCase() < b.name.toLowerCase()) return -1; if (a.name.toLowerCase() > b.name.toLowerCase()) return 1; return 0}).forEach(g => { %>
								<li><a href="/guild/<%= g.id %>"><img class="guild-icon" src="<%= g.icon ? `https://cdn.discordapp.com/icons/${g.id}/${g.icon}.jpg` : `/images/missing.png` %>" /><%= g.name %></a></li>
							<% }) %>
						<% } %>
					<% } %>
                </ul>
            <% } else { %>
                <p class="text">Log in to access the TypicalBot Dashboard.</p>
            <% } %>
        </div>
	</body>
</html>

<%- include("parts/footer.ejs") %>
